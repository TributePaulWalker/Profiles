# DivineEngine Quantumult é…ç½®ç¤ºä¾‹

# ä»¥ ";" æˆ– "#" æˆ– "//" å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚

# æœ€æ–°å®Œæ•´çš„ç¤ºä¾‹éœ€æŸ¥çœ‹ Quantumult X é‡Œã€Œé…ç½®æ–‡ä»¶ã€ä¸­çš„ã€Œç¤ºä¾‹ã€

# å®Œæ•´é…ç½®æ•™ç¨‹ï¼šhttps://www.notion.so/Quantumult-X-1d32ddc6e61c4892ad2ec5ea47f00917

# Update-2022.1.22.16.45

[general]
# Quantumult X ä¼šå¯¹æŒ‡å®šçš„ç½‘å€è¿›è¡Œç›¸åº”æµ‹è¯•ï¼Œä»¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§
server_check_url=http://cp.cloudflare.com/generate_204

# èµ„æºè§£æå™¨
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

# apiè·å–ä»¥åŠèŠ‚ç‚¹ä¿¡æ¯æŸ¥è¯¢
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js

# DNS æ’é™¤åˆ—è¡¨
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com

# Quantumult å°†ä¸ä¼šå¤„ç†åˆ° excluded_routes çš„æµé‡ã€‚ä¿®æ”¹åæœ€å¥½é‡æ–°å¯åŠ¨æ‚¨çš„è®¾å¤‡ã€‚
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32

# æ³¨æ„ï¼šå¦‚æœæ‚¨éœ€è¦è°ƒæ•´è¯¥å‚æ•°çš„å€¼ä¸º directï¼Œè¯·åŠ¡å¿…æ¸…æ¥šäº†è§£åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸ UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©ã€‚
fallback_udp_policy=direct

[dns]
# ç¦ç”¨ç³»ç»Ÿ DNS
# ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¼šä½¿ç”¨ä»å½“å‰ç½‘ç»œ(ç³»ç»Ÿ)ä¸­è·å–çš„ DNS æœåŠ¡å™¨(æ‚¨å¯ä»¥ä½¿ç”¨ã€Œno-systemã€ç¦ç”¨æ­¤åŠŸèƒ½ï¼Œä½†è‡³å°‘è¦å¢åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨ã€‚
;no-system

# ç¦ç”¨ IPv6
no-ipv6

# è‡ªå®šä¹‰ DNS
# DNSPod Public DNS
server=119.29.29.29

# DNS over HTTPS
;doh-server=https://dns.alidns.com/dns-query
;doh-server=https://223.6.6.6/dns-query

# æœ¬åœ° DNS æ˜ å°„
# Apple
server=/aaplimg.com/119.29.29.29
server=/apple.com/119.29.29.29
server=/apple.com.cn/119.29.29.29
server=/apple-cloudkit.com/119.29.29.29
server=/apple-mapkit.com/119.29.29.29
server=/cdn-apple.com/119.29.29.29
server=/icloud.com/119.29.29.29
server=/icloud.com.cn/119.29.29.29
server=/mzstatic.com/119.29.29.29
server=/*.aaplimg.com/119.29.29.29
server=/*.apple.com/119.29.29.29
server=/*.apple-cloudkit.com/119.29.29.29
server=/*.apple-mapkit.com/119.29.29.29
server=/*.cdn-apple.com/119.29.29.29
server=/*.icloud.com/119.29.29.29
server=/*.icloud.com.cn/119.29.29.29
server=/*.mzstatic.com/119.29.29.29
server=/*apple.com.akadns.net/119.29.29.29
server=/*.apple.com.edgekey.net/119.29.29.29
server=/*.apple.com.edgekey.net.globalredir.akadns.net/119.29.29.29
server=/*icloud.com.akadns.net/119.29.29.29

# Firebase Cloud Messaging
address=/mtalk.google.com/108.177.125.188

# Google Dl
server=/dl.google.com/119.29.29.29
server=/dl.l.google.com/119.29.29.29
server=/update.googleapis.com/119.29.29.29

# PlayStation
server=/*.dl.playstation.net/119.29.29.29

# Router Admin Panel
server=/amplifi.lan/system
server=/router.synology.com/system
server=/sila.razer.com/system
server=/router.asus.com/system
server=/routerlogin.net/system
server=/orbilogin.com/system
server=/www.LinksysSmartWiFi.com/system
server=/LinksysSmartWiFi.com/system
server=/myrouter.local/system
server=/www.miwifi.com/system
server=/miwifi.com/system
server=/mediarouter.home/system
server=/tplogin.cn/system
server=/tplinklogin.net/system
server=/melogin.cn/system
server=/falogin.cn/system

# Apple TestFlight
server=/*testflight.apple.com/8.8.4.4

[policy]
static=Final, HK, TW, JP, SG, US, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_Fitness.png

static=Telegram, HK, SG, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available_1.png

static=Streaming, HK, TW, JP, SG, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Streaming.png

static=Guard, reject, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/JOOX.png

url-latency-benchmark=HK, server-tag-regex=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=50, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png

url-latency-benchmark=TW, server-tag-regex=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=50, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png

url-latency-benchmark=JP, server-tag-regex=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=50, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png

url-latency-benchmark=SG, server-tag-regex=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$, check-interval=600, tolerance=50, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png

url-latency-benchmark=US, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=600, tolerance=50, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

[server_remote]


[filter_remote]
# åç»­è§„åˆ™ä¿®æ­£
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=åç»­è§„åˆ™ä¿®æ­£, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true

# å¹¿å‘Šæ‹¦æˆª
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list, tag=å¹¿å‘Šæ‹¦æˆª, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list#type=domain-set, tag=Advertising+, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true

# éšç§ä¿æŠ¤
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list, tag=éšç§ä¿æŠ¤, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true

# åº”ç”¨å†…è¿½è¸ª
https://raw.githubusercontent.com/mieqq/mieqq/master/In-AppTracker.txt#type=domain-set, tag=åº”ç”¨å†…è¿½è¸ª, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true

# è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list, tag=è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™, force-policy=Guard, update-interval=86400, opt-parser=true, enabled=true

# å›½é™…æµåª’ä½“æœåŠ¡
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=å›½é™…æµåª’ä½“æœåŠ¡, force-policy=Streaming, update-interval=86400, opt-parser=true, enabled=true

# TelegramæœåŠ¡
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=86400, opt-parser=true, enabled=true

# å…¨çƒåŠ é€Ÿ
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=å…¨çƒåŠ é€Ÿ, force-policy=proxy, update-interval=86400, opt-parser=true, enabled=true

# Apple æœåŠ¡
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, tag=Apple, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true

# ä¸­å›½ç›´è¿
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, tag=ä¸­å›½ç›´è¿, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true

# China IPæ± 
https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/cncidr.txt, tag=ğŸ‡¨ğŸ‡³ChinaIP, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true

# GeoIP2 æ•°æ®åº“
; https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

[rewrite_remote]
# ç¥æœºå¤å†™
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=ç¥æœºå¤å†™, update-interval=86400, enabled=true

# ç¥æœºå»å¹¿å‘Š
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=ç¥æœºå»å¹¿å‘Š, update-interval=86400, enabled=true

# è§£é”å®Œæ•´çš„Appleæœç´¢åŠŸèƒ½å’Œé›†æˆæœåŠ¡
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/qxrewrite/Siri_Suggestions.qxrewrite, tag=è§£é”Appleæœç´¢åŠŸèƒ½, update-interval=86400, enabled=true

# å…³é—­è°·æ­Œå®‰å…¨æœç´¢(Beta)
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Turn-Off-Google-Safesearch.conf, tag=å…³é—­è°·æ­Œå®‰å…¨æœç´¢(Beta), update-interval=86400, enabled=true

# NobyDaå»å¹¿å‘Š
https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/Rewrite_lhie1.conf, tag=NobyDaå»å¹¿å‘Š, update-interval=86400, enabled=true

# YouTubeå»å¹¿å‘Š
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/YouTubeAds.conf, tag=YouTubeå»å¹¿å‘Š, update-interval=86400, enabled=true

[server_local]


[filter_local]
# Local Area Network å±€åŸŸç½‘
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct

# GeoIP China(è‹¥å¯ç”¨ï¼Œåˆ™ç¦ç”¨ ChinaIP.list)
-geoip, cn, direct

final, Final

# å±è”½iOSç³»ç»Ÿæ›´æ–°
# å¦‚æœéœ€è¦å±è”½iOSç³»ç»Ÿæ›´æ–°ã€è¯·è‡ªè¡Œåˆ é™¤æ‰å±è”½ä»£ç å¼€å¤´çš„â€œ;â€
; DOMAIN,mesu.apple.com,reject
; DOMAIN,gdmf.apple.com,reject
; DOMAIN,updates-http.cdn-apple.com,reject
; DOMAIN,xp.apple.com,reject

[rewrite_local]
# å¾®åšå»å¹¿å‘Š
^https?://(sdk|wb)app.uve.weibo.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_launch.js
^https?://m?api\.weibo\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/photos/pic_recommend_status|video/tiny_stream_video_list|photo/info) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js

# å¾®ä¿¡å»é™¤å…¬ä¼—å·æ–‡ç« åº•éƒ¨å¹¿å‘Š
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js

# è§£é™¤å¾®ä¿¡é“¾æ¥é™åˆ¶
^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\? url script-response-body https://raw.githubusercontent.com/zZPiglet/Task/master/asset/UnblockURLinWeChat.js

# é…·æˆ‘éŸ³ä¹SVIP
^https?:\/\/vip1\.kuwo\.cn\/(vip\/v2\/user\/vip|vip\/spi/mservice) url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Kuwo.js

# Safariå…¨èƒ½æœç´¢
# > ä»¥ä¸‹ä¸ºSafariå…¨èƒ½æœç´¢ã€éœ€è¦æŠŠSafariçš„æœç´¢å¼•æ“è®¾ç½®ä¸ºï¼šDuckDuckGo

#gm   (Googleå›¾ç‰‡)
^https:\/\/duckduckgo.com\/\?q=gm\+([^&]+).+ url 302 https://www.google.com/search?&tbm=isch&q=$1

# gh   (GitHub)
^https:\/\/duckduckgo.com\/\?q=gh\+([^&]+).+ url 302 https://github.com/search?q=$1

# tf  (Google æœç´¢ TestFlight)
^https:\/\/duckduckgo.com\/\?q=tf(\+|%20)([^&]+).+ url 302 https://www.google.com/search?as_q=$2&as_sitesearch=testflight.apple.com

# wb: å¾®åš
^https:\/\/duckduckgo.com\/\?q=wb\+([^&]+).+ url 302 https://s.weibo.com/weibo/$1

# wx: å¾®ä¿¡
^https:\/\/duckduckgo.com\/\?q=wx\+([^&]+).+ url 302 https://weixin.sogou.com/weixinwap?query=$1

# jd : äº¬ä¸œ
^https:\/\/duckduckgo.com\/\?q=jd\+([^&]+).+ url 302 https://so.m.jd.com/ware/search.action?keyword=$1

# tb: æ·˜å®
^https:\/\/duckduckgo.com\/\?q=tb\+([^&]+).+ url 302 https://s.m.taobao.com/h5?q=$1

# tm: å¤©çŒ«
^https:\/\/duckduckgo.com\/\?q=tm\+([^&]+).+ url 302 https://s.m.tmall.com/m/search.htm?q=$1

# ytb  (YouTube)
^https:\/\/duckduckgo.com\/\?q=ytb\+([^&]+).+ url 302 https://www.youtube.com/results?search_query=$1

# ph  (PornHub) 
^https:\/\/duckduckgo.com\/\?q=ph\+([^&]+).+ url 302 https://cn.pornhub.com/video/search?search=$1

# bi: å¿…åº”
^https:\/\/duckduckgo.com\/\?q=bi\+([^&]+).+ url 302 https://cn.bing.com/search?q=$1

# bd: ç™¾åº¦
^https:\/\/duckduckgo.com\/\?q=bd\+([^&]+).+ url 302 https://www.baidu.com/s?wd=$1

# ccn (App Store ä¸´æ—¶æ¢è‡³ä¸­å›½åŒº)
^https:\/\/duckduckgo.com\/\?q=ccn&.+ url 302 https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143465&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=cn&urlDesc

# uus (App Store ä¸´æ—¶æ¢è‡³ç¾å›½åŒº) 
^https:\/\/duckduckgo.com\/\?q=uus&.+ url 302 https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143441&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=us&urlDesc

# hhk (App Store ä¸´æ—¶æ¢è‡³é¦™æ¸¯åŒº)
^https:\/\/duckduckgo.com\/\?q=hhk&.+ url 302 https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143463&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=hk&urlDesc

# ddg: DuckDuckGo 
^https:\/\/duckduckgo.com\/\?q=ddg\+([^&]+).+ url 302 https://duckduckgo.com/?ia=about&q=$1

# æ— æŒ‡ä»¤: è°·æ­Œ
^https:\/\/duckduckgo.com\/\?q=([^&]+).+ url 302 https://www.google.com/search?q=$1

# é˜»æ­¢google.com è·³è½¬åˆ°google.com.hk
^https?:\/\/(www\.)?g\.cn url 302 https://www.google.com
^https?:\/\/(www\.)?google\.cn url 302 https://www.google.com

# TestFlightä¸‹è½½ä¿®æ­£
^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$ url script-request-body https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js

# ç™¾åº¦æœç´¢é˜²è·³è½¬
^https?\:\/\/boxer\.baidu\.com\/scheme\?scheme url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/baidu-no-redirect.js

# ç¾æ ‡ç©ºæ°”è´¨é‡
^https?:\/\/weather-data\.apple\.com\/(v1|v2)\/weather.*(?!dataSets=forecastNextHour)(include=.*air_quality.*|dataSets=.*airQuality.*).*(country=[A-Z]{2})?.* url script-response-body https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Apple_Weather.js

[task_local]
# GeoIPæŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag=GeoIP æŸ¥è¯¢, img-url=location.fill.viewfinder.system, enabled=true

# Googleåˆ‡æ¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-google.js, tag=Google åˆ‡æ¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google.png, enabled=true

# YouTubeæŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/ytb-ui-check.js, tag=YouTube æŸ¥è¯¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true

# YouTubeåˆ‡æ¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-ytb.js, tag=YouTube åˆ‡æ¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true

# æµåª’ä½“æœåŠ¡æŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“æœåŠ¡æŸ¥è¯¢, img-url=checkmark.seal.system, enabled=true

# ç–«æƒ…åŠ¨æ€ ï¼ˆé»˜è®¤æ¯å¤©8ï½22ç‚¹ã€æ¯3å°æ—¶æ’­æŠ¥ä¸€æ¬¡ï¼‰
0 8-22/3 * * * https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/nCov.js, tag=ç–«æƒ…åŠ¨æ€, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/COVID-19.png, enabled=true

[http_backend]
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, tag=BoxJS, path=^/, enabled=true

[mitm]
skip_validating_cert = true
hostname = api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, -*.weibo.com, mp.weixin.qq.com, security.wechat.com, weixin110.qq.com, vip1.kuwo.cn, duckduckgo.com, testflight.apple.com, boxer.baidu.com, pan.baidu.com, weather-data.apple.com
